.\" Generated by scdoc 1.9.6
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.nh
.ad l
.\" Begin generated content:
.TH "oled-oomwatch" "8" "2025-03-04"
.P
.SH NAME
.P
oled-oomwatch - Monitor memory thresholds and take action when they are exceeded.
.P
.SH SYNOPSIS
.P
oled oomwatch  {-h --help | -v --version | configure | -e --enable
| -d --disable | -r --reload | -s --status | -k --kill}
.P
.SH DESCRIPTION
.P
\fBoled-oomwatch\fR Is a userspace oom-killer.  The tool will monitor swap and memory usage and will kill the top memory using process out of a list of processes once the configured thresholds are exceeded.  The tool uses Performance Co-Pilot's (PCP) Performance Metric Inference Engine (PMIE) to monitor the memory and swap thresholds.
.P
.SH COMMANDS
.P
\fB-h --help\fR
.RS 4
Display help
.P
.RE
\fB-v --version\fR
.RS 4
Display the version information.
.P
.RE
\fB-d --disable\fR
.RS 4
Disable \fBoled-oomwatch\fR from running.
.P
.RE
\fB-e --enable\fR
.RS 4
Enable \fBoled-oomwatch\fR.  Once you enable the tool, it will begin monitoring the memory and swap usage and will kill the selected programs if the thresholds are exceeded.
.P
.RE
\fB-r --reload\fR
.RS 4
Reload the settings stored in the \fBoled-oomwatch\fR configuration file.
.P
.RE
\fB-s --status\fR
.RS 4
Display whether \fBoled-oomwatch\fR is enabled or not.
.P
.RE
\fB-k --kill\fR
.RS 4
Kill the selected programs if the thresholds are exceeded.  You do not, normally, need to run this command manually.  \fBoled-oomwatch\fR will take care of this for you.
.P
.RE
\fBconfigure\fR
.RS 4
The configure command has several sub-options discussed below.
.RS 4
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.IP \(bu 4
.\}
--help - Display configuration specific help.
.RE
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.IP \(bu 4
.\}
--show - Display the current configuration.
.RE
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.IP \(bu 4
.\}
--delta - This sets the frequency, in seconds, at which the thresholds are checked.
.RE
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.IP \(bu 4
.\}
--holdoff - Specifies the "cool off" period in seconds.  The default of 0 should be a good setting for most use cases.
.RE
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.IP \(bu 4
.\}
--memavail_threshold - The threshold for memory free.  This is expressed as a percentage of free memory remaining.  Setting this to 100 or greater means that it is, effectively, always true.  Setting it to 0 is, effectively, always false.
.RE
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.IP \(bu 4
.\}
--swapfree_threshold - This will set the threshold for free swap.  Like memavail_threshold it is also a percentage.
.RE
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.IP \(bu 4
.\}
--monitored_process - Use this to specify the list of process names that \fBoled-oomwatch\fR is allowed to kill.  Provide this as a quoted, comma-separated list. Only programs whose names are in this list will be killed when memory or swap thresholds are met or exceeded.

.RE
.P
.P
.P
.RE
.RE
.SH EXAMPLE
.P
The following commands can be used to configure \fBoled-oomwatch\fR to kill the top memory user out of the programs listed when there is less than 10% memory free \fBand\fR less than 25% swap free.  The tool will check every 5 seconds.
.P
.nf
.RS 4
oled oomwatch configure --delta=5 --memavail_threshold=10 --swapfree_threshold=25 --monitored_process="application1,application2"

oled oomwatch -e
.fi
.RE
.P
.SH FILES
.P
\fI/var/oled/pcp/pmie/HOSTNAME/pmie.log\fR
.RS 4
Diagnostic information will be written to this file from PMIE
.P
.RE
.SH SEE ALSO
.P
PCP(1), PMIE(1), OLED(8)
