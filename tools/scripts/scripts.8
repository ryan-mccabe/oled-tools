.\" Generated by scdoc 1.9.6
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.nh
.ad l
.\" Begin generated content:
.TH "oled-scripts" "8" "2024-04-08"
.P
.SH NAME
.P
oled-scripts - Execute additional oled-tools scripts.
.P
.SH SYNOPSIS
.P
oled-scripts [-h] {list | run SCRIPT [ARGS]
| run-startup-enabled [--outdir OUTDIR ] | enable-startup SCRIPT
| disable-startup SCRIPT | reset-startup {--all | SCRIPT}}
.P
.SH DESCRIPTION
.P
\fBoled-scripts\fR is used to run additional scripts provided by oled-tools.  The
list of available scripts can be listed with command \fBlist\fR.
.P
.SH COMMANDS
.P
\fBlist\fR
.RS 4
List available scripts.
.P
.RE
\fBrun\fR \fISCRIPT\fR [\fIARGS\fR]
.RS 4
Run the given script with the given arguments.  \fISCRIPT\fR must be an
script name as returned by command \fBlist\fR.
.P
.RE
\fBrun-startup-enabled\fR [--outdir \fIOUTDIR\fR]
.RS 4
Run all the enabled startup scripts.  \fIOUTDIR\fR is used as base
directory for the output of the scripts; /var/oled/startup-scripts/ is
used by default.  See \fBSTARTUP SCRIPTS\fR for more details.
.P
.RE
\fBenable-startup\fR \fISCRIPT\fR
.RS 4
Enable a startup script.
.P
.RE
\fBdisable-startup\fR \fISCRIPT\fR
.RS 4
Disable a startup script.
.P
.RE
\fBreset-startup\fR {\fISCRIPT\fR | \fI--all\fR }
.RS 4
Reset a startup script to its default enabled/disabled state.  I.e.
reverts any invocation of commands \fBenable-startup\fR/\fBdisable-startup\fR.
If \fI--all\fR is provided, resets the enabled/disabled state of all
startup scripts.
.P
.RE
.SH STARTUP SCRIPTS
.P
Startup scripts are scripts that can be run at startup, mostly for diagnostics
on information collection.  A startup can be in state \fIenabled\fR or \fIdisabled\fR,
only \fIenabled\fR script are executed by command \fBrun-startup-enabled\fR.  List of
startup enabled scripts is fixed, but a script's enabled/disabled state can be
changed by users using commands \fBenable-startup\fR/\fBdisable-startup\fR.  Thus the
user can control which startup scripts are run by \fBrun-startup-enabled\fR.
Command \fBreset-startup\fR can be used to reset a script to its default enabled
state.
.P
.SS LIST OF STARTUP SCRIPTS
.P
The \fBlist\fR command list all available scripts, showing which of those are
startup scripts, and which of those are enabled.  It also shows which scripts'
enabled state have been changed by user, and differs from the default setup.
.P
.SS EXECUTION OF STARTUP SCRIPTS
.P
\fBrun-startup-scripts\fR runs all the enabled startup scripts in parallel and
waits for all the scripts to terminate.  The order in which they are started is
no guaranteed, thus the scripts must no assume any order/dependency w.r.t to
other startup scripts.
.P
.SS STARTUP SCRIPTS OUTPUT
.P
\fBrun-startup-scripts\fR creates a directory at \fIOUTDIR\fR/\fI<timestamp>\fR/, and
within this directory, one subdirectory is created for each script, named
after the script itself.  The scripts are executed with their CWD pointing to
their subdirectory and the stdout/stderr are redirected to file `output.log`
within that subdirectory.  For example, for a script named script1, the subdir
and output file would be \fIOUTDIR\fR/\fI<timestamp>\fR/script1/output.log.
.P
The output dir is /var/oled/startup-scripts/ by default, but it can be changed
by passing `--outdir OUTDIR` to \fBrun-startup-enabled\fR command.
.P
.SH AUTHOR
.P
Jose Lombera <jose.lombera@oracle.com>
